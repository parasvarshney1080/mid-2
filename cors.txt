$(document).ready(function() {
    // Call getProducts when the page is ready
    getProducts();

    // Function to get products and populate the list
    function getProducts() {
        $.ajax({
            url: 'https://localhost:7102/api/product',
            method: 'GET',
            success: function (data) {
                var productList = $('#productList tbody');
                productList.empty(); // Clear existing data

                $.each(data, function (index, product) {
                    productList.append(`
                        <tr>
                            <td>${product.id}</td>
                            <td>${product.name}</td>
                            <td>${product.price}</td>
                        </tr>
                    `);
                });
            },
            error: function (error) {
                console.error('Error fetching products:', error);
            }
        });
    }

    // Function to create a product
    function createProduct() {
        var productName = $('#productName').val();
        var productPrice = $('#productPrice').val();

        $.ajax({
            url: 'https://localhost:7102/api/Product',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({
                Name: productName,
                Price: productPrice
            }),
            success: function (data) {
                alert('Product created successfully!');
                $('#productName').val('');
                $('#productPrice').val('');
                getProducts(); // Refresh the product list after creating
            },
            error: function (error) {
                console.error('Error creating product:', error);
            }
        });
    }
});
